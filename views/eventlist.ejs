<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style">
    <link rel="shortcut icon" type="image/x-icon" href="/image" style="height: 10px; width: 10px;" />
    <title>EventLists</title>
</head>

<body>
    <!-- NavBarStart -->
    <header>
        <nav class="navContainer">
            <nav class="logo-title">
                <a href="/">
                    <img src="/image" alt="logo" class="logo" />
                    <h1 id="page-title">AcTrak</h1>
                </a>
            </nav>
            <a href="/main"><i class="bi bi-house-door-fill"></i>Home</a>
        </nav>
    </header>
    <hr>
    <!-- NavBarEnd -->

    <!-- Filter Box Start -->

    <form  action="/eventlist" method="post">
        <div class="fliterBox">
            <div class="filterOption">
                <label for="organisation">Organisation</label>
                <select name="organisation" id="organisation">
                    <option value="none" selected disabled hidden>Select the Organisation</option>
                    <option value="Sri Eshwar College of Engineering">Sri Eshwar College of Engineering</option>
                    <option value="Coimbatore Institute Of Technology">Coimbatore Institute Of Technology</option>
                    <option value="Anna University">Anna University</option>
                </select>
            </div>
            <div class="filterOption">
                <label for="domain">Domain</label>
                <select name="domain" id="domain">
                    <option value="none" selected disabled hidden>Select the Domain</option>
                    <option value="App Development">App Development</option>
                    <option value="Web Development">Web Development</option>
                    <option value="Machine Development">Machine Learning</option>
                </select>
            </div>
            
            <div class="filterOption">
                <label for="type">Type</label>
                <select name="type" id="type">
                    <option value="none" selected disabled hidden>Select the Type</option>
                    <option value="Technical">Technical</option>
                    <option value="Culturals">Culturals</option>
                    <option value="Health">Health</option>
                </select>
            </div>
            <div class="filterOption">
                <label for="sortBy">SortBy</label>
                <select name="sortBy" id="sortBy">
                    <option value="none" selected disabled hidden>Sorting Option</option>
                    <option value="Date(Ascending)">Date(Ascending)</option>
                    <option value="Date(Dscending)">Date(Decending)</option>
                    <option value="Duration(Ascending)">Duration(Ascending)</option>
                    <option value="Duration(Dscending)">Duration(Decending)</option>
                </select>
            </div>
            <div class="filterOption">
                <button type="submit" class="filter-btn">Filter<i class="bi bi-filter"></i></button>
            </div>
        </div>
    </form>

    <!-- Filter Box End -->

    <!-- Show Event Details -->
    <% for(let i=0; i < eventdetails.length; i++) { %>
        <h3 class="centerLink">Event <%= i+1%>
        </h3>
        <div class="event-box" , id="customers">
            <table>
                <%if((eventdetails[i]["_doc"]["eventJoinType"]=="outside")||(eventdetails[i]["_doc"]["organisationDomain"]==
                    currDomain)){%>
                    <tr>
                        <th>title</th>
                        <th>
                            <%=eventdetails[i]["_doc"]["title"]%>
                        </th>
                    </tr>
                    <%}%>
                        <% for (const det in eventdetails[i]["_doc"]) {%>
                            <%if(det!="__v" & det!="_id" & det!="title" ){%>
                                <%if((eventdetails[i]["_doc"]["eventJoinType"]=="outside")||(eventdetails[i]["_doc"]["organisationDomain"]==
                                    currDomain)){%>
                                    <tr>
                                        <td id="event-details-attributes">
                                            <%=det%>
                                        </td>
                                        <td>
                                            <%=eventdetails[i]["_doc"][det]%>
                                        </td>
                                    </tr>
                                    <%}%>
                                        <%}%>
                                            <%}%>
            </table>
            <hr>
        </div>
        <% } %>

            <!-- No Event Details -->
            <%if(eventdetails.length==0){%>
                <h1>No upcoming events</h1>
                <% } %>
</body>

</html>